---
layout: post
title: How SSH works
category: posts
---

I'll be talking about SSH or secure-shell today. SSH is a Internet protocol. It's a set of rules specifying how two computers securely communicate over an unsecure network, like the internet. It's widely used for system administration, such as performing software updates or software deployment on Unix/Linux machines.

SSH is based on Server/Client Architecture. SSH Server program must be installed on the remote computer and SSH client program must be installed on your computer. 

When you use SSH, you have access to the terminal screen/command line of the remote server computer. Here is a list of SSH clients that you use to set-up connection to the SSH server:

![alt text](https://2.bp.blogspot.com/-wDtfx8AKLFI/VuovT8wt-aI/AAAAAAAACbk/-vlfF7YShUU0ioLYrEi9ZvKiFKzEX844g/s320/SSH-OS-Clients.png "SSH OS Clients")

The SSH Protocol mainly consists of three components. **Authentication, Encryption and Integrity**:

1. **User authentication** – A way for system to identify users who are given or denied access the server. Access is either controlled through username and password set-up by an administrator on the remote server, or a cryptographic key generated by the user and shared with the server. Using a key-based access is more common, and you might already be familiar with this if you use github/bitbucket for version control of your software.

2. **Data encryption** – Data is encrypted such is it is garbage for everyone except for the intended recipients.

3. **Data Integrity** – This is guarantee that no one can modify information being sent from sender to receiver.

**SSH Features**

1. **Secure Remote Logins** - SSH allows secure remote login to the server by using an encrypted connection by using a ssh client program that authenticates you to the remote computer’s SSH server. This means your username and password are encrypted locally first and then they are transmitted. If authenticated successfully, any packets which follow are encrypted using the SSH protocol.

2. **Secure File Transfer** – Using SSH, a file that may contain sensitive information can be transmitted securely between machines with scp command.

3. **Remotely execute commands** - Using the SSH connection, you can execute commands externally on the remote server computer.

4. **Port Forwarding** - SSH can secure other unsecure TCP/IP protocols such as FTP, telnet using port forwarding techniques. For example one can use telnet protocol over SSH connection.

**SSH Encryption and Connection**

To establish a connection with the SSH server, the SSH client begins with a TCP (Transmission Control Protocol) handshake. The diagram below shows the process of TCP handshake:

![alt text](https://4.bp.blogspot.com/-TtdPdAgpl6Q/VurepyZUtqI/AAAAAAAACb4/Ha9spm2FY34anF2n59BGLgHcUCD_NVTjA/s1600/tcp-handshake.png "TCP Handshake")

After the connection is established, both the client and server agree on public parameters and generate their own private key and use the Diffie-Hellman Key Exchange algorithm to establish a session-key. See diffie-hellman algorithm. This session-key will be used to ecrypt the entire session.

After the session-key is established, the user authentication will begin. The user authentication can be done using passwords or using SSH key pairs as metioned earlier in the SSH features section. 

If you use password authenctication, the server will prompt the client for the password of the account they try to access. The password is encrypted by the client and sent. Once recieved by the server, it decrypts the password and verifies it. If the password is correct, then the client is given access to the account.


**Connecting to a SSH server from Mac OS X or Unix or Linux with username and password authentication**

Mac OS X and Linux both come with an SSH client built in. For this tutorial, I'll be connecting to a virtual machine using SSH from my computer. I have intalled Ubuntu on a Virtual Machine and I'm using port forwarding to be able to SSH into the VM. To do this, Go into you Virtual Machines Settings and Open the Network tab. You should a button that says "Port Forwarding". See image below

![alt text](https://3.bp.blogspot.com/-xcAhcN-WVN8/VurvAZCIhPI/AAAAAAAACcU/oiYxZ0cmv3koWoerMSJRibOrRTXDegdbQ/s320/VM-Port-Forwarding.png "VM Port Forwarding")

Click the Add new port icon and enter the following information:

![alt text](https://3.bp.blogspot.com/-Erj1eMxs5mE/VurvAawyHOI/AAAAAAAACcY/7NqADMow6T8TdC2fv567hFGBjI1sx-QYg/s320/VM-SSH-.png "VM SSH")

And that's all you have to do to SSH into the Virtual Machine.

Also install the OpenSSH-Server using the following command on your Virtual Machine:

> sudo apt-get install openssh-server

Once you have installed the server on the virutal machine, follow these steps: 
 
1. Get the IP address of your virtual machine server. Type the following in your terminal

> ifconfig

You should get the following screen:

![alt text](https://2.bp.blogspot.com/-UUJwkjxwM-s/VurzA327KjI/AAAAAAAACck/dc9wjxQsmisCmtZ38GZfNJDzyrervLRjw/s320/ifconfig.png "ifconfig")

To be continued...

2. Type the following command:

> 

**Connecting to a SSH server on Unix/Linux with key authenticationg**

**Potential Attacks by Hackers**

---

If you have any questions, follow and ping me on Twitter - I'm [@_g_singh_][twitter].

<!-- You'll want to [get the code][left] and read the README to learn how to
install and set up Left for your own purposes.

If you have any questions, follow and ping me on Twitter- I'm
[@holman][twitter].

[jekyll]: https://github.com/mojombo/jekyll
[zh]: http://zachholman.com
[left]: https://github.com/holman/left#readme -->
[twitter]: https://twitter.com/_g_singh_